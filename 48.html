<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        body {
            margin-right: 30px;
            /* max-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center; */

        }
    </style>
    <title>AntonVoronezh учеба по JavaScript DOM </title>
</head>

<body>
    <h1>AntonVoronezh учеба по JavaScript DOM</h1>
    <h2>Задачи на работу с JSON</h2>


    <h3>Задача 1. Дана JSON строка '["Коля", "Вася", "Петя"]'.
        Преобразуйте ее в массив JavaScript и выведите на экран элемент "Петя".</h3>

    <script>

        const json1 = '["Коля", "Вася", "Петя"]';

        const res1 = JSON.parse(json1);

        console.log(res1[2]);


    </script>
    <hr>


    <h3>Задача 2. Дан объект {a: 'aaa', b: 'bbb'}. Преобразуйте его в JSON</h3>

    <script>

        const obj2 = { a: 'aaa', b: 'bbb' };

        const res2 = JSON.stringify(obj2);

        console.log(res2);


    </script>
    <hr>


    <h2>Задачи на работу с куки (cookie) </h2>


    <h3>Задача 1. Установите куку с именем 'name' и значением 'Иван'.
        Выведите содержимое этой куки на экран</h3>

    <script>

        document.cookie = 'name=ffffff';


        function getCookie(c_name) {
            if (document.cookie.length > 0) {
                c_start = document.cookie.indexOf(c_name + "=");
                if (c_start != -1) {
                    c_start = c_start + c_name.length + 1;
                    c_end = document.cookie.indexOf(";", c_start);
                    if (c_end == -1) c_end = document.cookie.length;
                    return unescape(document.cookie.substring(c_start, c_end));
                }
            }
            return "";
        }

        console.log(getCookie('name'));


    </script>
    <hr>


    <h3>Задача 2. Установите куку с вашем именем и вашим возрастом.
        Выведите на экран содержимое этих двух кук.</h3>

    <script>

        document.cookie = 'name=bbbbbb';
        document.cookie = 'age=2222';


        console.log(getCookie('name'), getCookie('age'));


    </script>
    <hr>



    <h3>Задача 3. Дан инпут. Ведите в него город, например, Минск.
        Сохраните его в куки. Зайдя на другую страницу сайта вы должны увидеть
        фразу 'ваш город - Минск'.</h3>

    <input type="text" class="inp3">
    <p class="p3"></p>

    <script>
        const inp3 = document.querySelector('.inp3');
        const p3 = document.querySelector('.p3');



        inp3.addEventListener('blur', () => {

            console.log(inp3.value);


            document.cookie = 'path=/; domain=.127.0.0.1; city=' + inp3.value;

        });

        console.log(getCookie('city'));


    </script>
    <hr>


    <h3>Задача 4. При заходе на страницу спросите с помощью инпута день рождения пользователя.
        Когда он зайдет с следующий раз - напишите сколько месяцев, дней, часов, минут и
        секунд осталось до его дня рождения. И пусть по этим числам запуститься обратный
        отсчет (то есть они будут тикать).</h3>

    <input type="text" class="inp4" placeholder="21.02.2000">
    <table>
        <tr>
            <td id="hours"></td>
            <td id="minutes"></td>
            <td id="seconds"></td>
        </tr>
    </table>

    <script>
        const inp4 = document.querySelector('.inp4');
        const p4 = document.querySelector('.p4');



        window.addEventListener('load', () => {

            go();

        });

        let birthday = [];

        inp4.addEventListener('blur', function () {

            const arrVal = this.value.split('.');

            document.cookie = 'day=' + arrVal[0];
            document.cookie = 'month=' + arrVal[1];
            document.cookie = 'year=' + arrVal[2];

        });

        console.log(getCookie('day'), getCookie('month'), getCookie('year'));

        function go() {


            window.timerId = window.setInterval(function () {

                timer(getCookie('year'), getCookie('month'), getCookie('day'))

            }, 1000);
        };


        function timer(arg1, arg2, arg3) {
            var seconds = document.getElementById('seconds');
            var minutes = document.getElementById('minutes');
            var hours = document.getElementById('hours');
            var now = new Date();
            var midnight = new Date(arg1, arg2, arg3);
            var diff = Math.floor((midnight - now) / 1000);//разница в милисекундах, перевели в секунды
            var hoursRemain = Math.floor(diff / (60 * 60));
            var minutesRemain = Math.floor((diff - hoursRemain * 60 * 60) / 60);
            var secondsRemain = Math.floor(diff % 60);
            hours.innerHTML = hoursRemain;
            minutes.innerHTML = addZero(minutesRemain);
            seconds.innerHTML = addZero(secondsRemain);
        };
        function addZero(num) {
            if (num <= 9) return '0' + num;
            else return num;
        };


    </script>
    <hr>


    <h3>Задача 5. Дана форма с инпутами. Пользователь вводит какие-то данные и
        закрывает страницу (не факт, что он заполнил всю форму). Сделайте так,
        чтобы при следующем заходе на страницу введенные им ранее данные стояли на своих местах</h3>

    <input type="text" class="inp41">
    <input type="text" class="inp42">
    <input type="text" class="inp43">

    <script>
        const inp41 = document.querySelector('.inp41');
        const inp42 = document.querySelector('.inp42');
        const inp43 = document.querySelector('.inp43');


        inp41.addEventListener('blur', () => {

            document.cookie = 'inp41=' + inp41.value;

        });

        inp42.addEventListener('blur', () => {

            document.cookie = 'inp42=' + inp42.value;

        });

        inp43.addEventListener('blur', () => {

            document.cookie = 'inp43=' + inp43.value;

        });

        window.addEventListener('load', function () {

            inp41.value = getCookie('inp41');
            inp42.value = getCookie('inp42');
            inp43.value = getCookie('inp43');


        });

        console.log(getCookie('inp41'));



    </script>
    <hr>











    <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
</body>

</html>